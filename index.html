<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Water Meter Editor — City of Fair Oaks Ranch</title>

  <!-- ArcGIS Maps SDK for JavaScript 4.31 -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.31/esri/themes/light/main.css" />
  <script src="https://js.arcgis.com/4.31/"></script>

  <!-- Application Styles -->
  <link rel="stylesheet" href="css/styles.css" />

  <!-- Favicon — Fair Oaks Ranch seal -->
  <link rel="icon" href="logo.svg" type="image/svg+xml" />
</head>
<body>

<div class="app-shell">

  <!-- ── Header ────────────────────────────────────────────── -->
  <header class="app-header">
    <div class="header-brand">
      <!-- FOR Seal -->
      <img class="header-logo" src="logo.svg" alt="City of Fair Oaks Ranch" />
      <div class="header-titles">
        <div class="header-title">Water Meter Editor</div>
        <div class="header-subtitle">City of Fair Oaks Ranch — Utilities</div>
      </div>
    </div>

    <div class="header-spacer"></div>

    <div class="header-user">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
      <span id="userName" class="user-name">—</span>
    </div>
  </header>

  <!-- ── Body ──────────────────────────────────────────────── -->
  <div class="app-body">

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">

      <!-- Search -->
      <div class="sidebar-search">
        <div class="sidebar-search-label">Find a Meter</div>
        <div id="searchContainer"></div>
      </div>

      <!-- Editor -->
      <div class="sidebar-editor">

        <!-- Welcome / idle state -->
        <div id="welcomePanel" class="welcome-panel">
          <div class="welcome-icon">
            <svg viewBox="0 0 24 24">
              <path d="M12 2 C9 7, 5 12, 5 16 C5 19.9 8.1 23 12 23 C15.9 23 19 19.9 19 16 C19 12 15 7 12 2Z"/>
              <circle cx="12" cy="16" r="3"/>
            </svg>
          </div>
          <div class="welcome-heading">Water Meter Editing</div>
          <div class="welcome-body">
            Search for a meter above or click a meter on the map to begin editing.
            Use the map tools to add new meters.
          </div>

          <div class="welcome-workflows">
            <div class="wf-item">
              <div class="wf-badge new">+</div>
              <div class="wf-text">
                <strong>New Service Activation</strong>
                <span>Click the map to place a new meter. Fill in Account, Meter No., FlexNet, and Install Date.</span>
              </div>
            </div>
            <div class="wf-item">
              <div class="wf-badge changeout">↻</div>
              <div class="wf-text">
                <strong>Meter Change-Out</strong>
                <span>Select existing meter, update Meter No. and Meter Install Date. Attach change-out documentation.</span>
              </div>
            </div>
            <div class="wf-item">
              <div class="wf-badge terminate">—</div>
              <div class="wf-text">
                <strong>Service Termination</strong>
                <span>Document in Notes. Avoid deleting unless the record was created in error.</span>
              </div>
            </div>
          </div>
        </div>

        <div id="editorContainer"></div>
      </div>

    </aside>

    <!-- Map -->
    <div class="main-area">
      <button id="sidebarToggle" class="sidebar-toggle" title="Toggle sidebar">✕</button>
      <div id="viewDiv"></div>
    </div>

  </div>

  <!-- ── Status Bar ────────────────────────────────────────── -->
  <footer class="status-bar">
    <div class="status-left">
      <span><span class="status-dot"></span><span id="statusText">Initializing…</span></span>
      <span class="status-count" id="featureCount">—</span>
    </div>
    <span>NAD83 TX S Central (2278) · Operational Edit View</span>
  </footer>

</div>

<!-- Configuration -->
<script src="js/config.js"></script>
<!-- Application -->
<script src="js/app.js"></script>

</body>
</html>
